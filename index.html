<!DOCTYPE html>
<html>
<head lang="ja">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
	<meta http-equiv="content-language" content="ja">
	<title>Pepper Pitcher Controler</title>
	<script type="text/javascript" src="js/shake.js"></script>
	<script type="text/javascript">

	var myShakeEvent = new Shake({
		threshold: 15, // optional shake strength threshold
		timeout: 1000 // optional, determines the frequency of event generation
	});
	var audio = Array(4);
	audio[0] = new Audio("spo_ge_mbat01.mp3");
	audio[1] = new Audio("spo_ge_mbat02.mp3");
	audio[2] = new Audio("spo_ge_mbat03.mp3");
	audio[3] = new Audio("spo_ge_mbat_bant01.mp3");
	var status = document.getElementById("status");
	var result = document.getElementById("result");

	function startShakeChk(){
		document.getElementById("pitchButton").style.display="none";
		myShakeEvent.start();
		document.getElementById("result").style.display="none";
		document.getElementById("status").innerHTML="The pitcher wound up and...";
		audio[0].load();
		audio[1].load();
		audio[2].load();
		audio[3].load();
		var res = new Array("ホオオム　ラーーン","ヒット","ツーベース","アウト");
		window.setTimeout(function(){
			document.getElementById("status").innerHTML="and threw the pitch";
			document.getElementById("result").innerHTML="SWING!!";
			document.getElementById("result").style.display="block";

			window.addEventListener('shake', function(){
				var rnd;
				rnd = Math.floor( Math.random() * 4 );
				audio[rnd].play();
				window.removeEventListener('shake', this, false);
				myShakeEvent.stop();
				document.getElementById("result").innerHTML=res[rnd];
				window.setTimeout(function(){
					document.getElementById("status").innerHTML="Are You Ready?";
					document.getElementById("pitchButton").style.display="block";
				},2000);
			}, false);
		},5000);
	}

	</script>
</head>
<body background="00361.JPG" style="text-align:center">
	<img src="images-2.jpeg">
<div id="status" style="font-size:32px;">Are You Ready?</div>
<a style="display:block;background-color:red;color:white;font-size:32px;text-decoration:none" id="pitchButton" href="javascript:startShakeChk(this)" onclick="startShakeChk()">Pepper Pitch!</a>
<div id="result" style="line-height:80px;background-color:green;font-size:32px;font-wight:bold;color:white;position:absolute;bottom:0;top:0;right:0;width:300px;left:0;margin:auto;height:80px;border:5px solid brown;display:none">aa</div>
</body>
</html>

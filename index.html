<!DOCTYPE html>
<html>
<head lang="ja">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<meta http-equiv="content-language" content="ja">
	<title>Pepper Pitcher Controler</title>
	<script type="text/javascript" src="js/shake.js"></script>
	<script type="text/javascript">

	var myShakeEvent = new Shake({
		threshold: 15, // optional shake strength threshold
		timeout: 1000 // optional, determines the frequency of event generation
	});

	function startShakeChk(btn){
		btn.disabled=true;
		myShakeEvent.start();
		document.getElementById("status").innerHTML="The pitcher wound up and...";
		var audio = new Audio("spo_ge_mbat01.mp3");
		audio.load();
		window.setTimeout(function(){
			document.getElementById("status").innerHTML="and threw the pitch";

			window.addEventListener('shake', function(){
				audio.play();
				window.removeEventListener('shake', this, false);
				myShakeEvent.stop();
				btn.disabled=false;
				//shakeEventDidOccur(btn);
			}, false);
		},5000);
	}

	</script>
</head>
<body>
	<!--
<div id="arrow"><img src="images/arrow.png" width="118" alt="" /></div>
<div id="debug"></div>
-->
<div id="status">Are You Ready? Push Button!</div>
<input id="pitchButton" type="button" value="Pepper Pitch!" onclick="startShakeChk(this)">
</body>
</html>
